brew update


# clang compiler
if ! brew info llvm &>/dev/null; then

	brew install --with-clang llvm
fi

if ! brew info llvm37 &>/dev/null; then
	brew tap homebrew/versions
	brew install llvm37
	brew outdated llvm37 || brew upgrade llvm37
fi

# install upgrade
for pkg in autoconf pkg-config cmake boost libsodium gettext shellcheck; do

	if brew list -1 | grep -q "^${pkg}\$"; then
		echo "Package '$pkg' is installed - checking if outdated"
		brew outdated "$pkg" || brew upgrade "$pkg"
	else 
		brew install "$pkg"
	fi
done

# relink all installed
brew list -1 | while read line; do 
	brew unlink $line
	brew link $line 
done
